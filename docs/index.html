<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>chariot Package • chariot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="chariot Package">
<meta property="og:description" content="Functions that query and model concepts in the
    OMOP Vocabularies available for download at
    \href{athena.ohdsi.org}{athena.ohdsi.org}">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">chariot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/mapping-to-hemonc.html">Mapping to HemOnc</a>
    </li>
    <li>
      <a href="articles/pivot-concept-ancestor.html">Pivot Concept Ancestors and Descendants</a>
    </li>
    <li>
      <a href="articles/pivot-concept-relationships.html">Pivot Concept Relationships</a>
    </li>
    <li>
      <a href="articles/string-manipulation.html">String Manipulation</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/meerapatelmd/chariot/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="chariot" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#chariot" class="anchor"></a>chariot <img src="reference/figures/logo.png" align="right" alt="" width="120">
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>Query, analyze, and explore a Postgres instance of the OMOP Vocabularies for a multitude of use cases, including standardizing data to the OMOP Vocabularies, automatically annotating data pulled from the OMOP CDM with the concept attributes, and calculating cumulative drug dosage from data found in the Drug Exposures table.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"meerapatelmd/chariot"</span><span class="op">)</span></code></pre></div>
</div>
<div id="related-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#related-packages" class="anchor"></a>Related Packages</h2>
<ul>
<li>
<a href="https://meerapatelmd.github.io/setupAthena">setupAthena</a>: sets up a Postgres instance of the Athena vocabularies downloaded from athena.ohdsi.org.<br>
</li>
<li>
<a href="https://meerapatelmd.github.io/amphora">amphora</a>: plots concept ancestries to assist in knowledge management projects such as data standardization.<br>
</li>
<li>
<a href="https://meerapatelmd.github.io/metaorite">metaorite</a>: the UMLS Metathesaurus equivalent of this package</li>
</ul>
</div>
<div id="concept-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#concept-objects" class="anchor"></a>Concept Objects</h2>
<p>This package was inititally written with the objective of exploring the vocabularies for concept mapping. To avoid the challenge of using solely the Concept Id in the R environment when exploring a certain concept, an S4 <code>Concept</code> class is introduced, where <code>Concept</code> objects store all the concept attributes found in the Concept Table as slots. This is a basic example which shows you how to solve a common problem:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://meerapatelmd.github.io/chariot/">chariot</a></span><span class="op">)</span>
<span class="va">aspirin</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_concept.html">get_concept</a></span><span class="op">(</span>concept_id <span class="op">=</span> <span class="fl">1112807</span>,
                       vocab_schema <span class="op">=</span> <span class="st">"omop_vocabulary"</span>,
                       conn <span class="op">=</span> <span class="va">conn</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">aspirin</span><span class="op">)</span>
<span class="co">#&gt; [1] "concept"</span>
<span class="co">#&gt; attr(,"package")</span>
<span class="co">#&gt; [1] "chariot"</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">aspirin</span>
<span class="co">#&gt; An object of class "concept"</span>
<span class="co">#&gt; Slot "concept_id":</span>
<span class="co">#&gt; [1] 1112807</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "concept_name":</span>
<span class="co">#&gt; [1] "aspirin"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "concept_synonym_names":</span>
<span class="co">#&gt; [1] ""</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "domain_id":</span>
<span class="co">#&gt; [1] "Drug"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "vocabulary_id":</span>
<span class="co">#&gt; [1] "RxNorm"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "concept_class_id":</span>
<span class="co">#&gt; [1] "Ingredient"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "standard_concept":</span>
<span class="co">#&gt; [1] "S"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "concept_code":</span>
<span class="co">#&gt; [1] "1191"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "valid_start_date":</span>
<span class="co">#&gt; [1] "1970-01-01"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "valid_end_date":</span>
<span class="co">#&gt; [1] "2099-12-31"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "invalid_reason":</span>
<span class="co">#&gt; [1] NA</span></code></pre></div>
<p><code>Concept</code> class objects keep the user informed of all the attributes of a concept during a session using the <code>chariot</code> package. For example, I can look up the RxNorm Ingredients belonging to the ATC 5th Concept Class <code>lisinopril</code> using the Concept Id <code>21601787</code> alone.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resultset</span> <span class="op">&lt;-</span>
<span class="fu"><a href="reference/lookup_atc_class_ingredients.html">lookup_atc_class_ingredients</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">conn</span>, 
                             vocab_schema <span class="op">=</span> <span class="st">"omop_vocabulary"</span>,
                             atc_concept_obj <span class="op">=</span> <span class="fl">21601787</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resultset</span>
<span class="co">#&gt; # A tibble: 1 x 10</span>
<span class="co">#&gt;   concept_id concept_name domain_id vocabulary_id concept_class_id</span>
<span class="co">#&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;           </span>
<span class="co">#&gt; 1    1308216 lisinopril   Drug      RxNorm        Ingredient      </span>
<span class="co">#&gt; # … with 5 more variables: standard_concept &lt;chr&gt;, concept_code &lt;chr&gt;,</span>
<span class="co">#&gt; #   valid_start_date &lt;date&gt;, valid_end_date &lt;date&gt;, invalid_reason &lt;chr&gt;</span></code></pre></div>
<p>However, upon viewing the output, the only knowledge known based on the arguments is the <code>21601787</code> concept id. When using the <code>Concept</code> class, this information is not lost.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lisinopril_class_concept</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_concept.html">get_concept</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">conn</span>,
                                        concept_id <span class="op">=</span> <span class="fl">21601787</span>, 
                                        vocab_schema <span class="op">=</span> <span class="st">"omop_vocabulary"</span><span class="op">)</span>
<span class="va">resultset</span> <span class="op">&lt;-</span>
<span class="fu"><a href="reference/lookup_atc_class_ingredients.html">lookup_atc_class_ingredients</a></span><span class="op">(</span>conn <span class="op">=</span> <span class="va">conn</span>, 
                             vocab_schema <span class="op">=</span> <span class="st">"omop_vocabulary"</span>,
                             atc_concept_obj <span class="op">=</span> <span class="va">lisinopril_class_concept</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">resultset</span>
<span class="co">#&gt; # A tibble: 1 x 10</span>
<span class="co">#&gt;   concept_id concept_name domain_id vocabulary_id concept_class_id</span>
<span class="co">#&gt;        &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;           </span>
<span class="co">#&gt; 1    1308216 lisinopril   Drug      RxNorm        Ingredient      </span>
<span class="co">#&gt; # … with 5 more variables: standard_concept &lt;chr&gt;, concept_code &lt;chr&gt;,</span>
<span class="co">#&gt; #   valid_start_date &lt;date&gt;, valid_end_date &lt;date&gt;, invalid_reason &lt;chr&gt;</span></code></pre></div>
<p>The resultset can be referenced back to the <code>lisinopril_class_concept</code> object that has retained all the concept attributes:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lisinopril_class_concept</span>
<span class="co">#&gt; An object of class "concept"</span>
<span class="co">#&gt; Slot "concept_id":</span>
<span class="co">#&gt; [1] 21601787</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "concept_name":</span>
<span class="co">#&gt; [1] "lisinopril; oral"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "concept_synonym_names":</span>
<span class="co">#&gt; [1] "lisinopril"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "domain_id":</span>
<span class="co">#&gt; [1] "Drug"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "vocabulary_id":</span>
<span class="co">#&gt; [1] "ATC"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "concept_class_id":</span>
<span class="co">#&gt; [1] "ATC 5th"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "standard_concept":</span>
<span class="co">#&gt; [1] "C"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "concept_code":</span>
<span class="co">#&gt; [1] "C09AA03"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "valid_start_date":</span>
<span class="co">#&gt; [1] "1970-01-01"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "valid_end_date":</span>
<span class="co">#&gt; [1] "2099-12-31"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Slot "invalid_reason":</span>
<span class="co">#&gt; [1] NA</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/meerapatelmd/chariot/">https://​github.com/​meerapatelmd/​chariot/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/meerapatelmd/chariot/issues/">https://​github.com/​meerapatelmd/​chariot/​issues/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>Apache License 2.0</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Meera Patel, MD <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3401-3948" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Meera Patel, MD.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
